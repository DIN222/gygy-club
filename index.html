
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GY-GY Club</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js" async></script>
    <style>
        * { -webkit-tap-highlight-color: transparent; box-sizing: border-box; }
        body { margin: 0; background: #000; color: #d4af37; font-family: 'Georgia', serif; text-align: center; height: 100vh; width: 100vw; overflow: hidden; }
        
        .screen { position: absolute; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; opacity: 0; visibility: hidden; z-index: 5; transition: opacity 1s ease; }
        .active { opacity: 1; visibility: visible; }

        /* –≠–∫—Ä–∞–Ω—ã */
        .door-container { border: 2px solid #d4af37; padding: 10px; cursor: pointer; transition: transform 2s, opacity 1.5s; }
        .door-open { transform: scale(3); opacity: 0; }
        
        /* –§–æ–π–µ (–ö–∞—Ä—Ç–æ—á–∫–∞) */
        .card { width: 85%; max-width: 320px; padding: 25px; border: 2px solid #d4af37; background: #0a0a0a; }
        #qrcode { background: #fff; padding: 5px; margin: 15px auto; width: 110px; height: 110px; display: flex; justify-content: center; align-items: center; border: 2px solid #d4af37; }

        /* –•–æ–ª–ª –∏ –ì–∞–ª–µ—Ä–µ—è */
        .gallery-mini { display: flex; gap: 10px; margin-bottom: 20px; padding: 0 10px; }
        .art-frame { width: 80px; height: 110px; border: 2px solid #d4af37; background: #050505; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 24px; position: relative; }
        .art-label { font-size: 7px; letter-spacing: 1px; margin-top: 5px; color: #888; text-transform: uppercase; }

        /* –ê–†–ö–ê */
        .arch-container { 
            position: relative; width: 220px; height: 300px; 
            border: 3px solid #d4af37; border-bottom: none; border-radius: 110px 110px 0 0;
            overflow: hidden; cursor: pointer; background: #050505;
        }
        
        .beads-curtain { position: absolute; top: 0; width: 100%; height: 100%; display: flex; justify-content: space-around; z-index: 10; }
        .bead-thread { width: 2px; height: 100%; background: repeating-linear-gradient(to bottom, #5d4037 0px, #5d4037 12px, #d4af37 12px, #d4af37 14px); transition: transform 1.2s ease, opacity 0.8s; }

        .curtains-open .bead-thread:nth-child(n+11) { transform: translateX(160%) rotate(15deg); opacity: 0; }
        .curtains-open .bead-thread:nth-child(-n+10) { transform: translateX(-160%) rotate(-15deg); opacity: 0; }

        /* –ö–Ω–æ–ø–∫–∏ */
        .btn-gold { width: 100%; padding: 12px; background: transparent; border: 2px solid #d4af37; color: #d4af37; text-transform: uppercase; font-size: 10px; letter-spacing: 2px; cursor: pointer; margin-top: 15px; }
    </style>
</head>
<body>

    <audio id="door-snd"><source src="door_open.mp3" type="audio/mpeg"></audio>
    <audio id="bar-snd" loop><source src="bar_ambient.mp3" type="audio/mpeg"></audio>
    <audio id="beads-snd"><source src="https://assets.mixkit.co/active_storage/sfx/1070/1070-preview.mp3" type="audio/mpeg"></audio>

    <div id="screen-door" class="screen active">
        <div style="letter-spacing: 10px; margin-bottom: 30px;">GY-GY PRIVATE</div>
        <div class="door-container" onclick="openMainDoor()"><img src="door_1.jpg" style="width: 70vw; max-width: 300px;"></div>
    </div>

    <div id="screen-welcome" class="screen"><h1>WELCOME</h1><p style="font-size:10px; color:#666; letter-spacing:5px;">CHARLIE IS WAITING</p></div>

    <div id="screen-foyer" class="screen">
        <div class="card">
            <div id="user-avatar" style="font-size:50px;">üë§</div>
            <div id="user-nick" style="font-size:20px; margin: 10px 0;">GUEST</div>
            <div id="user-id" style="font-size:10px; color:#555;">SERIAL: GY-0000</div>
            <div id="qrcode"></div>
            <button class="btn-gold" onclick="goToHall()">Enter the Club</button>
            <button class="btn-gold" style="margin-top:10px; border-color:#555; color:#555;" onclick="window.Telegram.WebApp.close()">Exit</button>
        </div>
    </div>

    <div id="screen-hall" class="screen">
        <div class="gallery-mini">
            <div class="art-frame">üì∏<div class="art-label">Studio</div></div>
            <div class="art-frame">üéôÔ∏è<div class="art-label">Stage</div></div>
            <div class="art-frame">üÉè<div class="art-label">Archive</div></div>
        </div>
        <div id="beads-wrapper" class="arch-container" onclick="openBeads()">
            <div style="position:absolute; width:100%; top:40%; color:#222; font-size:10px;">BAR ENTRANCE</div>
            <div class="beads-curtain" id="curtain-threads"></div>
        </div>
        <div id="bar-status" style="margin-top:20px; opacity:0; transition: 1s; font-style:italic; font-size:12px;">–í—ã –≤ –±–∞—Ä–µ. –ù–∞–ª–∏—Ç–æ.</div>
    </div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        const tg = window.Telegram.WebApp;
        if(tg) { tg.expand(); tg.ready(); }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∏—Ç–µ–π
        const curtain = document.getElementById('curtain-threads');
        for(let i=0; i<20; i++) {
            const thread = document.createElement('div');
            thread.className = 'bead-thread';
            thread.style.transitionDelay = (i * 0.02) + 's';
            curtain.appendChild(thread);
        }

        function openMainDoor() {
            document.getElementById('door-snd').play();
            document.getElementById('screen-door').classList.add('door-open');
            setTimeout(() => {
                document.getElementById('screen-door').classList.remove('active');
                document.getElementById('screen-welcome').classList.add('active');
                setTimeout(() => {
                    document.getElementById('screen-welcome').classList.remove('active');
                    setupIdentity();
                    document.getElementById('screen-foyer').classList.add('active');
                }, 2000);
            }, 1000);
        }

        function setupIdentity() {
            let id = localStorage.getItem('gy_id') || Math.floor(1000 + Math.random() * 9000);
            localStorage.setItem('gy_id', id);
            document.getElementById('user-id').innerText = 'SERIAL: GY-' + id;
            const avs = ['ü•É','üé©','üç∏','üö¨','üé∑','üé≤','üÉè','üíé','üîë','üïØÔ∏è'];
            document.getElementById('user-avatar').innerText = avs[id % 10];
            if (typeof QRCode !== "undefined") {
                document.getElementById("qrcode").innerHTML = "";
                new QRCode(document.getElementById("qrcode"), { text: "GY-ID:"+id, width: 100, height: 100 });
            }
        }

        function goToHall() {
            document.getElementById('screen-foyer').classList.remove('active');
            document.getElementById('screen-hall').classList.add('active');
        }

        function openBeads() {
            document.getElementById('beads-snd').play();
            document.getElementById('bar-snd').volume = 0.3;
            document.getElementById('bar-snd').play();
            document.getElementById('beads-wrapper').classList.add('curtains-open');
            document.getElementById('bar-status').style.opacity = "1";
            if(tg && tg.HapticFeedback) tg.HapticFeedback.impactOccurred('medium');
        }
    </script>
</body>
</html>
