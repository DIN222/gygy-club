
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GY-GY Club</title>
    <style>
        body { margin: 0; background: #000; color: #d4af37; font-family: 'Georgia', serif; text-align: center; height: 100vh; overflow: hidden; display: flex; justify-content: center; align-items: center; }
        .screen { position: absolute; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: opacity 0.5s; }
        .door-img { width: 80%; max-width: 350px; border: 1px solid #d4af37; cursor: pointer; filter: sepia(0.5); }
        .hidden { display: none !important; opacity: 0; }
        
        .card { width: 85%; max-width: 320px; padding: 30px 15px; border: 1px solid #d4af37; background: #0a0a0a; position: relative; }
        .nick { font-size: 24px; text-transform: uppercase; margin: 10px 0; letter-spacing: 2px; }
        .id-badge { font-family: monospace; font-size: 10px; color: #666; }
        
        /* Кнопки меню */
        .menu-btn { 
            display: block; width: 100%; margin-top: 15px; padding: 12px;
            background: none; border: 1px solid #444; color: #d4af37;
            text-transform: uppercase; font-size: 11px; cursor: pointer;
            transition: 0.3s;
        }
        .menu-btn:active { background: #d4af37; color: #000; border-color: #d4af37; }
        .exit-btn { border-color: #d4af37; margin-top: 30px; font-weight: bold; }
    </style>
</head>
<body>

    <div id="door-screen" class="screen">
        <div style="margin-bottom: 20px; letter-spacing: 4px; font-size: 14px;">PRIVATE ENTRANCE</div>
        <img src="door_1.jpg" class="door-img" onclick="enterClub()">
    </div>

    <div id="foyer-screen" class="screen hidden">
        <div class="card">
            <div style="font-size: 9px; opacity: 0.5;">MEMBERSHIP CARD</div>
            <div id="user-nick" class="nick">LOADING...</div>
            <div id="user-id" class="id-badge">SERIAL: 00-000</div>
            
            <hr style="border: 0; border-top: 1px solid #222; margin: 20px 0;">
            
            <button class="menu-btn" onclick="alert('Скоро: Карта напитков')">Bar Menu</button>
            <button class="menu-btn" onclick="alert('Скоро: Живая музыка')">Events</button>
            
            <button class="menu-btn exit-btn" onclick="closeApp()">Return to Chat</button>
        </div>
    </div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        // Генерация или получение данных
        let userData = JSON.parse(localStorage.getItem('gygy_member')) || {
            id: Math.floor(1000 + Math.random() * 9000),
            nick: ['JAZZ DUKE', 'NIGHT OWL', 'MYSTIC GUEST'][Math.floor(Math.random() * 3)]
        };
        localStorage.setItem('gygy_member', JSON.stringify(userData));

        function enterClub() {
            // Визуальный переход без ожидания звука
            document.getElementById('door-screen').classList.add('hidden');
            document.getElementById('foyer-screen').classList.remove('hidden');
            
            document.getElementById('user-nick').innerText = userData.nick;
            document.getElementById('user-id').innerText = 'SERIAL: GY-' + userData.id;

            if (tg.HapticFeedback) tg.HapticFeedback.impactOccurred('medium');
        }

        function closeApp() {
            tg.close(); // Официальная команда закрытия
        }
    </script>
</body>
</html>
