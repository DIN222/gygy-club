<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GY-GY Club v2.1.6</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        * { -webkit-tap-highlight-color: transparent; box-sizing: border-box; }
        body { margin: 0; background: #000; color: #d4af37; font-family: 'Times New Roman', Times, serif; text-align: center; min-height: 100vh; width: 100vw; overflow-x: hidden; }
        
        .block { position: absolute; top: 0; left: 0; width: 100%; min-height: 100vh; display: none; flex-direction: column; align-items: center; justify-content: center; padding: 15px; }
        .block.active { display: flex !important; }

        /* GRID */
        .terminal-grid { display: flex; flex-direction: row; flex-wrap: wrap; justify-content: center; gap: 20px; width: 100%; max-width: 800px; margin-top: 10px; }
        .panel { flex: 1; min-width: 260px; display: flex; flex-direction: column; align-items: center; padding: 10px; }
        .panel-setup { border-right: 1px solid rgba(212, 175, 55, 0.3); }

        .section-title { font-size: 10px; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 15px; opacity: 0.8; font-weight: bold; }
        
        /* PHOTO SLOT - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ä–∞–º–∫–∞ 1px */
        .photo-slot { 
            width: 110px; height: 110px; border: 1px solid #d4af37; 
            margin-top: 10px; position: relative; cursor: pointer;
            background: rgba(212, 175, 55, 0.05);
            display: flex; align-items: center; justify-content: center;
        }
        .photo-slot img { width: 100%; height: 100%; object-fit: cover; position: absolute; }
        .photo-slot span { font-size: 8px; padding: 5px; text-transform: uppercase; opacity: 0.9; }

        .btn-gold { 
            width: 100%; max-width: 200px; padding: 11px; background: transparent; 
            border: 1px solid #d4af37; color: #d4af37; text-transform: uppercase; 
            font-size: 10px; letter-spacing: 2px; cursor: pointer; font-family: inherit; margin: 5px 0;
            transition: 0.3s;
        }
        .btn-reset { border: none; opacity: 0.6; font-size: 8px; margin-top: 0; }
        .glow-btn { background: rgba(212, 175, 55, 0.15) !important; animation: pulse 2s infinite; font-weight: bold; }
        
        @keyframes pulse { 0% { box-shadow: 0 0 5px rgba(212,175,55,0.2); } 50% { box-shadow: 0 0 15px rgba(212,175,55,0.5); } 100% { box-shadow: 0 0 5px rgba(212,175,55,0.2); } }

        /* –Ø–ó–´–ö–ò 4x2 */
        .lang-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-top: 20px; width: 100%; max-width: 240px; }
        .lang-item { font-size: 9px; opacity: 0.7; cursor: pointer; padding: 4px; transition: 0.3s; }
        .lang-item.active { border-bottom: 1px solid #d4af37; opacity: 1; }

        @media (max-width: 650px) { 
            .terminal-grid { flex-direction: column; } 
            .panel-setup { border-right: none; border-bottom: 1px solid rgba(212, 175, 55, 0.3); padding-bottom: 15px; } 
        }
    </style>
</head>
<body>

    <audio id="door-sound" preload="auto"><source src="door_open.mp3" type="audio/mpeg"></audio>
    <audio id="bar-sound" loop preload="auto"><source src="bar_ambient.mp3" type="audio/mpeg"></audio>

    <div id="block-entrance" class="block active">
        <div style="opacity: 0.8; letter-spacing: 6px; margin-bottom: 10px; font-size: 11px;">GY-GY PRIVATE</div>
        <div class="door-container" onclick="handleDoor(this)" id="door-frame">
            <img src="door_1.jpg" style="width: 50vw; max-width: 180px;">
        </div>
    </div>

    <div id="block-welcome" class="block">
        <div style="width:140px; height:140px; border-radius:50%; border:1px solid #d4af37; overflow:hidden; margin-bottom:15px;">
            <img src="charlie.png" style="width:100%; height:100%; object-fit:cover;">
        </div>
        <h1 style="font-size: 2.8rem; letter-spacing: 5px; margin: 0 0 20px 0;">WELCOME</h1>
        <button class="btn-gold" onclick="startTerminal()">PROCEED</button>
    </div>

    <div id="block-identity" class="block">
        <div class="terminal-grid">
            <div class="panel panel-setup">
                <div class="section-title" id="t-choice">–í–ê–® –í–´–ë–û–†</div>
                <div style="display:flex; align-items:center; gap:10px;">
                    <div onclick="changeAvatar(-1)" style="cursor:pointer; font-size:24px; padding:10px;">&#10094;</div>
                    <div id="user-avatar" style="font-size:45px;">ü•É</div>
                    <div onclick="changeAvatar(1)" style="cursor:pointer; font-size:24px; padding:10px;">&#10095;</div>
                </div>
                <div style="display:flex; align-items:center; gap:10px; margin-bottom:10px;">
                    <div onclick="changeID(-1)" style="cursor:pointer; font-size:24px; padding:10px;">&#10094;</div>
                    <div id="label-res" style="font-size:18px; letter-spacing:2px;">‚Ññ 1000</div>
                    <div onclick="changeID(1)" style="cursor:pointer; font-size:24px; padding:10px;">&#10095;</div>
                </div>
                <button class="btn-gold" onclick="saveChanges()" id="btn-save">–°–û–•–†–ê–ù–ò–¢–¨</button>
                <button class="btn-gold btn-reset" onclick="resetIdentity()" id="btn-reset">–°–ë–†–û–°–ò–¢–¨</button>
            </div>

            <div class="panel">
                <div class="section-title" id="t-card">–ö–ê–†–¢–ê –£–ß–ê–°–¢–ù–ò–ö–ê</div>
                <div style="background:#fff; padding:4px; border-radius:4px; position:relative; display:inline-block;">
                    <div id="qrcode"></div>
                    <div id="qr-inner-icon" style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:#fff; font-size:18px;">ü•É</div>
                </div>
                
                <input type="file" id="file-input" style="display:none" accept="image/*" onchange="previewFile()">
                <div class="photo-slot" onclick="document.getElementById('file-input').click()">
                    <span id="t-photo-text">–ü–û –ñ–ï–õ–ê–ù–ò–Æ<br>–í–ê–®–ï –§–û–¢–û –ò–õ–ò –ê–í–ê–¢–ê–†</span>
                    <img id="photo-preview" src="" style="display:none">
                </div>

                <div id="hall-btn-box" style="display:none; width:100%; margin-top:10px;">
                    <button class="btn-gold glow-btn" onclick="enterHall()" id="btn-hall">–í–•–û–î –í –•–û–õ–õ</button>
                </div>
            </div>
        </div>

        <div class="lang-grid">
